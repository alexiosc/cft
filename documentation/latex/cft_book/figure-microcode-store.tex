% -*- latex -*-
\documentclass[border=200pt,class=memoir,preview]{standalone}
\input{preamble-new}
\input{macros}

\begin{document}%
%\tikzexternaldisable%
\begin{tikzpicture}%

    \begin{scope}
      \begin{scope}[thin,draw opacity=0,line width=0pt]
        \draw[fill=cfthl!25](0,0) rectangle (9.5,0.6);
        \foreach \x in {0, ..., 9}{
          \draw[fill=cfthl!50,xshift=\x cm](0,0) rectangle (0.5,0.6);
        }
        %\draw[fill=cfthl!50,xshift=10 cm](0,0) rectangle (0.5,0.6);
      \end{scope}
      \foreach \x in {0.5, 1, ..., 9}{
        \draw[thin] (\x cm, 0) -- (\x cm, -0.1cm);
      }
      \draw[line width=2pt](0,0) rectangle (9.5,0.6);
      \draw (9.5,0) node[below left] { \footnotesize 0 };
      \draw (0,0) node[below] { \footnotesize 18 };

      \foreach \x in {3,4,5,6,10,11,12,13,14}{
        \begin{scope}[xshift=9.5 cm - 0.5 * ( \x cm + 1 cm)]
          \draw[thick](0,-0.1) -- (0,0.6);
          \draw (0,0) node[below right] { \footnotesize \x };
        \end{scope}
      }
      %% \draw[thick](1,-0.1) -- (1,0.6);

      %% \draw[thick](4,-0.1) -- (4,0.6);
      \draw (8.5, 0.3) node { \UPC };
      \draw (1, 0.3) node { \UCB };
      \draw (5, 0.3) node { Opcode };
      \draw (0.25, 0.7)[xshift=7 cm] node[right, rotate=60] { \ns{AINDEX} };
      \draw (0.25, 0.7)[xshift=6.5 cm]  node[right, rotate=60] { \ns{SKIP} };
      \draw (0.25, 0.7)[xshift=6 cm]  node[right, rotate=60] { \asm{R} };

      \draw (0.25, 0.7)[xshift=3.5 cm]  node[right, rotate=60] { \ps{FL} };
      \draw (0.25, 0.7)[xshift=3 cm]  node[right, rotate=60] { \ps{FV} };
      \draw (0.25, 0.7)[xshift=2.5 cm]  node[right, rotate=60] { \ns{IRQS} };
      \draw (0.25, 0.7)[xshift=2 cm]  node[right, rotate=60] { \ns{RSTHOLD} };
      %% \draw (7.5, 0.3) node[left, rotate=45] { \ns{SKIP} };

      %% %% \draw (2.25, 0.3) node { I };
      %% %% \draw (2.75, 0.3) node { R };
      %% \draw (7.25, 0.3) node { \ABUSn{0â€“12} };

      %% \draw (1.5,-1) node[right] { Bank number, bit 0 };
      %% \draw (1.5,-1.5) node[right] { Bank number, bit 1 };

      %% \draw[thick, rounded corners=5.5mm] (1.5, -1.5) -- (0.25, -1.5) -- (0.25, -0.2);
      %% \draw[thick, rounded corners=3mm] (1.5, -1) -- (0.75, -1) -- (0.75, -0.2);
    \end{scope}

   \begin{scope}[xshift=-1.25cm, yshift=-3cm]

      \draw[draw opacity=0, shading=axis, top color=white, bottom
        color=cfthl!50] (0,0) rectangle (12,-2);
      \draw[xshift=4cm, draw opacity=0, shading=axis, top color=white, bottom
        color=cfthl!25] (0,0) rectangle (4,-2);
      \foreach \x in {0, 1, 2}{
        \draw (10 cm - 4 * \x cm,-1.9) node[above] { Microcode ROM \x };
      }


      \begin{scope}[thin,draw opacity=0,line width=0pt]
        \draw[fill=cfthl!25](0,0) rectangle (12,0.6);
        \foreach \x in {0, ..., 11}{
          \draw[fill=cfthl!50,xshift=\x cm](0,0) rectangle (0.5,0.6);
        }
      \end{scope}
      \foreach \x in {0.5, 1, ..., 12}{
        \draw[thin] (\x cm, 0) -- (\x cm, -0.1cm);
      }
      \draw[line width=2pt](0,0) rectangle (12,0.6);
      \draw (12,0) node[below left] { \footnotesize 0 };
      \draw (0,0) node[below right] { \footnotesize 23 };

      \foreach \x in {3, 6, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22}{
        \begin{scope}[xshift=12 cm - 0.5 * ( \x cm + 1 cm)]
          \draw[thick](0,-0.1) -- (0,0.6);
          \draw (0,0) node[below right] { \footnotesize \x };
        \end{scope}
      }
      %% \draw[thick](1,-0.1) -- (1,0.6);

      %% \draw[thick](4,-0.1) -- (4,0.6);
      \draw (11, 0.3) node { \RUNITn{} };
      \draw (9.25, 0.3) node { \WUNITn{} };
      \draw (7.5, 0.3) node { \OPIFn{} };

      \draw (0.25, 0.7)[xshift=6 cm] node[right, rotate=60] { \CPL };
      \draw (0.25, 0.7)[xshift=5.5 cm] node[right, rotate=60] { \CLL };
      \draw (0.25, 0.7)[xshift=5 cm] node[right, rotate=60] { \STI };
      \draw (0.25, 0.7)[xshift=4.5 cm] node[right, rotate=60] { \CLI };
      \draw (0.25, 0.7)[xshift=4 cm] node[right, rotate=60] { \INCPC };
      \draw (0.25, 0.7)[xshift=3.5 cm] node[right, rotate=60] { \STPDR };
      \draw (0.25, 0.7)[xshift=3 cm] node[right, rotate=60] { \STPAC };
      \draw (0.25, 0.7)[xshift=2.5 cm] node[right, rotate=60] { \DEC };
      \draw (0.25, 0.7)[xshift=2 cm] node[right, rotate=60] { \MEM };
      \draw (0.25, 0.7)[xshift=1.5 cm] node[right, rotate=60] { \IO };
      \draw (0.25, 0.7)[xshift=1 cm] node[right, rotate=60] { \ns{R} };
      \draw (0.25, 0.7)[xshift=0.5 cm] node[right, rotate=60] { \ns{W} };
      \draw (0.25, 0.7)[xshift=0 cm] node[right, rotate=60] { \END };

      %% \draw (0.25, 0.8)[xshift=6.5 cm]  node[right, rotate=60] { \ns{SKIP} };
      %% \draw (0.25, 0.8)[xshift=6 cm]  node[right, rotate=60] { \asm{R} };

      %% \draw (0.25, 0.8)[xshift=3.5 cm]  node[right, rotate=60] { \ps{FL} };
      %% \draw (0.25, 0.8)[xshift=3 cm]  node[right, rotate=60] { \ps{FV} };
      %% \draw (0.25, 0.8)[xshift=2.5 cm]  node[right, rotate=60] { \ns{IRQS} };
      %% \draw (0.25, 0.8)[xshift=2 cm]  node[right, rotate=60] { \ns{RSTHOLD} };
    \end{scope}


\end{tikzpicture}%
%\tikzexternalenable%
\end{document}

% End of file.
