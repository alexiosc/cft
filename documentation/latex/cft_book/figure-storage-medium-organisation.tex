% -*- latex -*-
\documentclass[class=memoir,preview]{standalone}
\input{preamble}

\begin{document}%
%\tikzexternaldisable%
\begin{tikzpicture}%

  \input{partial-fs}

   \begin{scope}[xshift=7cm]
     \draw[fill=cfthl!25,yshift=4cm](0,0) rectangle (6,2);
     %
     \draw[fill=cfthl,yshift=5.5cm](0,0) rectangle (0.5,0.5);
     \draw[fill=cfthl!50,draw opacity=0] (4,4.5) rectangle (6,4);
     %
     \draw[fill=cfthl!50,yshift=3cm](0,0) rectangle (6,1);
     \draw[fill=white,draw opacity=0] (5.5,3) rectangle (6,3.5);
     %
     \draw[fill=cfthl!50](0,0) rectangle (6,1);
     \draw[fill=cfthl!50,draw opacity=0] (1,1) rectangle (6,1.5);
     % Grid
     \draw[step=0.5cm,color=cfthl!90] (0,0) grid (6,6);
     % Frames
     \draw[fill=none,semithick,yshift=5.5cm](0,0) rectangle (0.5,0.5);
     \draw[fill=none,semithick](0,4) -- (4,4) -- (4,4.5) -- (6,4.5);
     \draw[fill=none,semithick](0,3) -- (5.5,3) -- (5.5,3.5) -- (6,3.5);
     \draw[fill=none,semithick](0,1) -- (1,1) -- (1,1.5) -- (6,1.5);
     % Frame around entire box
     \draw[heavy, draw opacity=0](0,0) rectangle (6,6);
     % Text
     \draw(-.1,6) node [above right] {\scriptsize Block 0};
     %\draw(6,0) node [below] {\scriptsize n};
     \draw(3,6) node [above] {Storage Medium};
     \draw(3,5) node {Slice 0};
     \draw(3,3.5) node {Slice 1};
     \draw(3,.75) node {Slice 15};
     \draw(3,2.25)node [rotate=90] {\Huge ...};
     \draw[fill=none, heavy](0,0) rectangle (6,6);
   \end{scope}

   \draw(1.5,6) node [above] {Disk Label};
   %\draw[fill=cfthl!25, heavy](0,0) rectangle (3,6);
   \begin{scope}[yshift=5.3cm]
     \draw[fill=cfthl!25,thick](0,0) rectangle (3,0.7);
     \draw (1.5,0.35) node {Magic (\magicDiskLabel)};
   \end{scope}
   %
   \begin{scope}[yshift=3cm] 
     \draw[fill=cfthl!50,thick](0,0) rectangle (3,2.3);
     \draw (1.5,1.15) node {Boot code};
   \end{scope}
   %
   \begin{scope}[yshift=2.3cm]
     \draw[fill=cfthl!25,thick](0,0) rectangle (3,0.7);
     \draw (1.5,0.35) node {Slice 0 start/len};
   \end{scope}
   %
   \begin{scope}[yshift=1.6cm]
     \draw[fill=cfthl!50,thick](0,0) rectangle (3,0.7);
     \draw (1.5,0.35) node {Slice 1 start/len};
   \end{scope}
   %
   \begin{scope}
     \draw[fill=cfthl!50,thick](0,0) rectangle (3,0.7);
     \draw (1.5,0.35) node {Slice 15 start/len};
   \end{scope}
   %
   %
   \draw[fill opacity=0.3, shading=axis, right color=white, left color=cfthl!75] (7.5,6) -- (3, 6) -- (3, 0) -- (7.5,5.5) -- (7.5,6);
   \draw[fill=none, xshift=7cm, heavy](0,0) rectangle (6,6);
   \draw[fill=none, xshift=7cm, semithick](0,5.5) rectangle (0.5,6);
   \draw[fill=none, heavy](0,0) rectangle (3,6);
   \draw(1.5,1.15)node [rotate=90] {\Huge ...};
   %
   %\draw[thick outline arrow, rounded corners=6mm] (6,5.75) -- (7.4,5.75);
   %\draw[thick outline arrow, rounded corners=6mm] (6,4.25) -- (10.9,4.25);
   %\draw[thick outline arrow, rounded corners=6mm] (6,1.25) -- (7.9,1.25);
   %
   \draw[thick arrow, -stealth, rounded corners=6mm] (3,2.65) -- (4,2.65) -- (6,5.75) -- (7.5,5.75);
   \draw[thick arrow, -stealth, rounded corners=6mm] (3,1.95) -- (4,1.95) -- (6,4.25) -- (11,4.25);
   \draw[thick arrow, -stealth, rounded corners=6mm] (3,0.35) -- (4,0.35) -- (6,1.25) -- (8,1.25);

\end{tikzpicture}%
%\tikzexternalenable%
\end{document}

% End of file.

